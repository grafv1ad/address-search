{"version":3,"file":"main.2a06bcadf54fdd604543.js","mappings":"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","sources":["webpack://get-address-info/./src/scripts/main.js","webpack://get-address-info/webpack/bootstrap","webpack://get-address-info/webpack/runtime/compat get default export","webpack://get-address-info/webpack/runtime/define property getters","webpack://get-address-info/webpack/runtime/hasOwnProperty shorthand"],"sourcesContent":["const API_URL = 'https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/address';\r\nconst API_TOKEN = '89147d67ecec30829c71feb6b8ebc352a7dd4e7a';\r\n\r\nconst searchWrapper = document.querySelector('.search__input-wrapper');\r\nconst searchInput = searchWrapper.querySelector('#search');\r\nconst searchHistoryBlock = document.querySelector('.history__list');\r\nconst searchErrorBlock = document.querySelector('.search__error');\r\nconst suggestionBlock = document.querySelector('.search__suggest');\r\nconst resultBlock = document.querySelector('.result');\r\nconst resultTable = resultBlock.querySelector('.result__table');\r\nconst resultMapWrapper = resultBlock.querySelector('.result__map');\r\nconst settingsBlock = document.querySelector('.settings');\r\n\r\nconst getLocalStorageSupport = () => {\r\n    try {\r\n        return !!window.localStorage;\r\n    } catch (error) {\r\n        console.debug(error);\r\n        return false;\r\n    }\r\n}\r\nconst localStorageSupport = getLocalStorageSupport();\r\n\r\nconst clearSuggestions = () => suggestionBlock.innerHTML = '';\r\nconst hideResult = () => resultBlock.classList.remove('result_active');\r\n\r\nconst addLoadingEffect = (disableInput = false) => {\r\n    searchWrapper.classList.add('search__input-wrapper_loading');\r\n    if (disableInput) searchInput.disabled = true;\r\n}\r\nconst removeLoadingEffect = () => {\r\n    searchWrapper.classList.remove('search__input-wrapper_loading');\r\n    searchInput.disabled = false;\r\n}\r\n\r\nconst renderError = (error) => searchErrorBlock.textContent = error;\r\nconst clearError = () => searchErrorBlock.textContent = '';\r\n\r\nconst getSearchHistory = () => {\r\n    const searchHistory = window.localStorage.getItem('search-history');\r\n    if (!searchHistory) return [];\r\n\r\n    try {\r\n        return JSON.parse(searchHistory);\r\n    } catch (error) {\r\n        // Сносим историю, если данные битые и не получается спарсить\r\n        window.localStorage.removeItem('search-history');\r\n        console.debug('histoty cleared', error);\r\n        return [];\r\n    }\r\n}\r\n\r\nconst updateSearchHistory = (query) => {\r\n    if (!query) return;\r\n    \r\n    const searchHistory = getSearchHistory();\r\n    let array = [query];\r\n    let result = array;\r\n\r\n    if (searchHistory.length > 0) {\r\n        if (searchHistory.includes(query)) return;\r\n        searchHistory.unshift(query);\r\n        result = searchHistory;\r\n    }\r\n\r\n    result = JSON.stringify(result);\r\n\r\n    try {\r\n        window.localStorage.setItem('search-history', result);\r\n    } catch (error) {\r\n        // Освобождаем место, если localStorage переполнился\r\n        result = array.slice(0, array.length / 2);\r\n        result = JSON.stringify(result);\r\n\r\n        window.localStorage.setItem('search-history', result);\r\n        console.debug('reduce history length', error);\r\n    }\r\n\r\n    renderSearchHistory();\r\n}\r\n\r\nconst renderSearchHistory = () => {\r\n    if (!localStorageSupport) {\r\n        searchHistoryBlock.innerHTML = '<span style=\"color: var(--c-main);\">В вашем бразуере отключен localStorage :(</span>';\r\n        return;\r\n    }\r\n\r\n    searchHistoryBlock.innerHTML = '';\r\n    \r\n    let searchHistory = getSearchHistory();\r\n    searchHistory = searchHistory.slice(0, 5);\r\n\r\n    searchHistory.forEach(item => {\r\n        const element = document.createElement('div');\r\n        element.textContent = item;\r\n        element.classList.add('sidebar__block-item');\r\n        element.setAttribute('onclick', 'window.renderResult(this.textContent);');\r\n        searchHistoryBlock.append(element);\r\n    });\r\n}\r\nrenderSearchHistory();\r\n\r\nconst debounce = (callee, timeout) => {\r\n    return function perform(...args) {\r\n        let previousCall = this.lastCall\r\n        this.lastCall = Date.now()\r\n\r\n        if (previousCall && this.lastCall - previousCall <= timeout) {\r\n            clearTimeout(this.lastCallTimer)\r\n        }\r\n\r\n        this.lastCallTimer = setTimeout(() => callee(...args), timeout)\r\n    }\r\n}\r\n\r\nconst getSelectedLanguage = () => {\r\n    const activeLanguaguge = settingsBlock.querySelector('input[name=\"language\"]:checked');\r\n    return activeLanguaguge?.value || 'en';    \r\n}\r\n\r\nconst getCurrentSearchQuery = () => searchInput.value;\r\n\r\nconst request = {\r\n    method: 'POST',\r\n    mode: 'cors',\r\n    headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Token ${API_TOKEN}`,\r\n    },\r\n    count: 10,\r\n    get body() {\r\n        return JSON.stringify({\r\n            query: getCurrentSearchQuery(),\r\n            language: getSelectedLanguage(),\r\n            count: this.count,\r\n            locations: {\r\n                country: '*',\r\n            },\r\n        });\r\n    },\r\n};\r\n\r\nconst getData = async (count) => {\r\n    const currentRequest = request;\r\n    if (count) currentRequest.count = count;\r\n\r\n    try {\r\n        const response = await fetch(API_URL, currentRequest);\r\n        if (response.ok) {\r\n            return response.json();\r\n        }\r\n\r\n        renderError('Ошибка, проверьте подключение к Интернету и попробуйте снова');\r\n        return;\r\n    } catch (error) {\r\n        renderError('Что-то пошло не так, попробуйте обновить страницу');\r\n        console.debug(error);\r\n        return;\r\n    }\r\n}\r\n\r\nconst getSuggestions = async () => {\r\n    const query = getCurrentSearchQuery();\r\n    let result = [];\r\n\r\n    if (localStorageSupport) {\r\n        const searchHistory = getSearchHistory();\r\n        const queryRegExp = new RegExp(`.*(${query}).*`, 'i');\r\n    \r\n        searchHistory.forEach(item => {\r\n            if (queryRegExp.test(item)) result.push({\r\n                history: true,\r\n                value: item,\r\n            });\r\n        });\r\n    \r\n        result = result.slice(0, 5);\r\n    }\r\n\r\n    try {\r\n        const data = await getData();\r\n        const suggestions = data.suggestions;\r\n    \r\n        if (!suggestions) {\r\n            renderError('Ошибка, попробуйте изменить запрос или обновить страницу');\r\n            return;\r\n        }\r\n\r\n        if (!suggestions.length) {\r\n            renderError('Не удалось ничего найти, измените запрос и попробуйте снова');\r\n            return;\r\n        }\r\n\r\n        for (const suggest in suggestions) {\r\n            result.push({\r\n                history: false,\r\n                value: suggestions[suggest].value,\r\n            });\r\n        }\r\n\r\n        result = result.reduce((acc, item) => {\r\n            if (!acc.find(element => element.value === item.value)) acc.push(item);\r\n            return acc;\r\n        }, []);\r\n\r\n        return result.slice(0, 10);\r\n    }\r\n    catch (error) {\r\n        renderError('Что-то пошло не так, попробуйте обновить страницу');\r\n        console.debug(error);\r\n        return;\r\n    }\r\n}\r\n\r\nconst getResult = async () => {\r\n    try {\r\n        const data = await getData(1);\r\n\r\n        if (!data.suggestions || !data.suggestions[0]) {\r\n            renderError('Ошибка, попробуйте изменить запрос или обновить страницу');\r\n            return;\r\n        }\r\n\r\n        return data.suggestions[0];\r\n    }\r\n    catch (error) {\r\n        renderError('Что-то пошло не так, попробуйте обновить страницу');\r\n        console.debug(error);\r\n        return;\r\n    }\r\n}\r\n\r\nconst renderSuggestions = async () => {\r\n    clearSuggestions();\r\n    hideResult();\r\n\r\n    const queryLength = getCurrentSearchQuery().length;\r\n    if (!queryLength) return;\r\n\r\n    if (queryLength < 3) {\r\n        renderError('Пожалуйста, введите не менее 3 символов в поисковой строке');\r\n        return;\r\n    }\r\n\r\n    addLoadingEffect();\r\n\r\n    const suggestions = await getSuggestions();\r\n\r\n    if (!suggestions) {\r\n        removeLoadingEffect();\r\n        return;\r\n    }\r\n\r\n    suggestions.forEach(suggest => {\r\n        const element = document.createElement('div');\r\n        element.textContent = suggest.value;\r\n        element.classList.add('search__suggest-item');\r\n        if (suggest.history) element.classList.add('search__suggest-item_history');\r\n        element.setAttribute('onclick', 'window.renderResult(this.textContent);');\r\n        suggestionBlock.append(element);\r\n    });\r\n    removeLoadingEffect();\r\n}\r\nconst debouncedRenderSuggestions = debounce(renderSuggestions, 1000);\r\n\r\nconst renderResult = async (query) => {\r\n    searchInput.value = query;\r\n\r\n    clearSuggestions();\r\n    addLoadingEffect(true);\r\n\r\n    const result = await getResult();\r\n\r\n    resultTable.innerHTML = '';\r\n\r\n    const cords = (result.data.geo_lat && result.data.geo_lon) ? `${result.data.geo_lat}, ${result.data.geo_lon}` : null;\r\n\r\n    // ФИАС-код (он же код ГАР) адреса для России.\r\n    // Идентификатор OpenStreetMap для Беларуси, Казахстана и Узбекистана.\r\n    // Для остальных стран — идентификатор объекта в базе GeoNames. \r\n    let fiasValue = result.data.fias_id;\r\n    let fiasName = 'ФИАС';\r\n    if (fiasValue) {\r\n        if (/^\\d+$/.test(fiasValue)) {\r\n            fiasValue = `<a href=\"https://www.geonames.org/${fiasValue}/\" target=\"_blank\">${fiasValue}</a>`;\r\n            fiasName = 'GeoNames';\r\n        } else if (/^relation:\\d+$/.test(fiasValue)) {\r\n            fiasValue = `<a href=\"https://www.openstreetmap.org/${fiasValue.replace(':', '/')}/\" target=\"_blank\">${fiasValue}</a>`;\r\n            fiasName = 'OpenStreetMap';\r\n        } else {\r\n            fiasValue = `<a href=\"http://basicdata.ru/online/fias/${fiasValue}/\" target=\"_blank\">${fiasValue}</a>`;\r\n        }\r\n    }\r\n\r\n    const options = [\r\n        {\r\n            name: 'Полный адрес',\r\n            value: result.unrestricted_value,\r\n        },\r\n        {\r\n            name: 'Координаты',\r\n            value: cords ? `<a href=\"https://yandex.ru/maps/?text=${result.data.geo_lat}%2C${result.data.geo_lon}\" target=\"_blank\">${cords}</a>` : null,\r\n        },\r\n        {\r\n            name: 'Индекс',\r\n            value: result.data.postal_code,\r\n        },\r\n        {\r\n            name: 'Страна',\r\n            value: result.data.country,\r\n        },\r\n        {\r\n            name: 'ISO код страны',\r\n            value: result.data.country_iso_code,\r\n        },\r\n        {\r\n            name: 'Федеральный округ',\r\n            value: result.data.federal_district,\r\n        },\r\n        {\r\n            name: 'Регион',\r\n            value: result.data.region_with_type,\r\n        },\r\n        {\r\n            name: 'ISO код региона',\r\n            value: result.data.region_iso_code,\r\n        },\r\n        {\r\n            name: 'Город',\r\n            value: result.data.city,\r\n        },\r\n        {\r\n            name: 'Улица',\r\n            value: result.data.street,\r\n        },\r\n        {\r\n            name: 'Земельный участок',\r\n            value: result.data.stead,\r\n        },\r\n        {\r\n            name: 'Дом',\r\n            value: result.data.house,\r\n        },\r\n        {\r\n            name: 'Квартира',\r\n            value: result.data.flat,\r\n        },\r\n        {\r\n            name: fiasName,\r\n            value: fiasValue,\r\n        },\r\n        {\r\n            name: 'КЛАДР',\r\n            value: result.data.kladr_id,\r\n        },\r\n        {\r\n            name: 'ОКАТО',\r\n            value: result.data.okato,\r\n        },\r\n        {\r\n            name: 'ОКТМО',\r\n            value: result.data.oktmo,\r\n        },\r\n        {\r\n            name: 'ИФНС',\r\n            value: result.data.tax_office,\r\n        },\r\n    ];\r\n\r\n    options.forEach(option => {\r\n        if (!option.value) return;\r\n\r\n        const nameCell = document.createElement('div');\r\n        const valueCell = document.createElement('div');\r\n\r\n        nameCell.textContent = option.name;\r\n        valueCell.innerHTML = option.value;\r\n\r\n        resultTable.append(nameCell);\r\n        resultTable.append(valueCell);\r\n    });\r\n\r\n    if (cords) {\r\n        window.resultMap.setCenter([result.data.geo_lat, result.data.geo_lon], 15, { checkZoomRange: true });\r\n        resultMapWrapper.classList.add('result__map_active');\r\n    } else {\r\n        resultMapWrapper.classList.remove('result__map_active');\r\n    }\r\n\r\n    if (localStorageSupport) updateSearchHistory(result.value);\r\n\r\n    resultBlock.classList.add('result_active');\r\n    removeLoadingEffect();\r\n}\r\nwindow.renderResult = renderResult;\r\n\r\nconst interact = () => {\r\n    removeLoadingEffect();\r\n    clearError();\r\n    clearSuggestions();\r\n    hideResult();\r\n    debouncedRenderSuggestions();\r\n}\r\n\r\nsearchInput.addEventListener('input', () => interact());\r\nsearchInput.addEventListener('keyup', (event) => {\r\n    if (event.key === 'Enter') interact();\r\n});\r\n\r\nwindow.addEventListener('storage', (event) => {\r\n    console.debug(event)\r\n    if (event.key === 'search-history') {\r\n        renderSearchHistory();\r\n    }\r\n});\r\n\r\nymaps.ready(() => {\r\n    window.resultMap = new ymaps.Map('result-map', {\r\n        center: ['55.608475', '-27.669462'],\r\n        zoom: 2,\r\n        controls: ['zoomControl'],\r\n    }, {\r\n        suppressMapOpenBlock: true,\r\n    });\r\n});\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }"],"names":["searchWrapper","document","querySelector","searchInput","searchHistoryBlock","searchErrorBlock","suggestionBlock","resultBlock","resultTable","resultMapWrapper","settingsBlock","localStorageSupport","getLocalStorageSupport","window","localStorage","error","console","debug","clearSuggestions","innerHTML","hideResult","classList","remove","addLoadingEffect","disableInput","arguments","length","undefined","add","disabled","removeLoadingEffect","renderError","textContent","getSearchHistory","searchHistory","getItem","JSON","parse","removeItem","renderSearchHistory","slice","forEach","item","element","createElement","setAttribute","append","getSelectedLanguage","activeLanguaguge","value","getCurrentSearchQuery","request","method","mode","headers","count","body","stringify","query","language","this","locations","country","getData","async","currentRequest","response","fetch","ok","json","debouncedRenderSuggestions","callee","queryLength","suggestions","result","queryRegExp","RegExp","test","push","history","suggest","reduce","acc","find","getSuggestions","_len","args","Array","_key","previousCall","lastCall","Date","now","clearTimeout","lastCallTimer","setTimeout","debounce","renderResult","data","getResult","cords","geo_lat","geo_lon","fiasValue","fias_id","fiasName","replace","name","unrestricted_value","postal_code","country_iso_code","federal_district","region_with_type","region_iso_code","city","street","stead","house","flat","kladr_id","okato","oktmo","tax_office","option","nameCell","valueCell","resultMap","setCenter","checkZoomRange","array","includes","unshift","setItem","updateSearchHistory","interact","addEventListener","event","key","ymaps","ready","Map","center","zoom","controls","suppressMapOpenBlock","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","n","getter","__esModule","d","a","definition","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call"],"sourceRoot":""}